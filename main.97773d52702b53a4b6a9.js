(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"0HMw":function(e,t,a){},LlGi:function(e,t,a){e.exports=a.p+"images/photo-red.jpg"},QfWi:function(e,t,a){"use strict";a.r(t);a("0HMw");var n={headerSearchWarningShow:function(){return document.querySelector("#header-search-warning-show")},filmsGallery:document.querySelector("#films-gallery"),header:document.querySelector(".header-container-js"),logo:document.querySelector(".header-logo-js"),homeLink:document.querySelector(".navigation-list-item-link-home"),spinner:document.querySelector(".js-spinner"),openModalBtn:document.querySelector('[data-action="open-modal"]'),closeModalBtn:document.querySelector('[data-action="close-modal"]'),backdrop:document.querySelector(".js-backdrop"),logOutbutton:document.querySelector(".js-singOut-button"),userName:document.querySelector(".js-display-username"),paginationContainer:document.querySelector("#pagination")},i=(a("8cZI"),a("lmye"),a("JBxO"),a("FdtR"),a("QDHd"),{homeHeader:'<div class=" header home-header header-container">\n  \n  <form action="" class="header-search-form" id="search-form">\n    <input type="text" name="query" class="header-search-form-input" placeholder="Поиск фильмов">\n    <button class="header-search-form-btn" type="submit"></button>\n  </form>\n  <p id="header-search-warning-show"  class="header-search-warning-show is-hidden">Search result not successful. Enter the correct movie name and</p>\n',myLibraryHeader:'<div class=" header my-library-header header-container">\n  \n  <ul class="header-button-list">\n    <li class="header-button-item"><button class="header-button header-button-watched is-active-btn">watched</button></li>\n    <li class="header-button-item"><button class="header-button header-button-queue">queue</button></li>\n  </ul>\n',modalHeader:'<div class="header modal-header header-container">\n'}),s=(a("fp7Y"),a("2c84")),r=a.n(s),o=document.querySelector(".js-spinner");function l(){o.classList.add("is-open")}function c(){o.classList.remove("is-open")}var d={query:"",page:1,filmsAmount:0,path:"https://api.themoviedb.org/3",key:"ffddee44025dd24685ea61d637d56d24",setQuery:function(e){this.query=e},setPage:function(e){this.page=e},incrementPage:function(){this.page+=1},decrementPage:function(){this.page-=1},resetPage:function(){this.page=1},setFilmsAmount:function(e){this.filmsAmount=e},fetchTrends:function(){return fetch(this.path+"/trending/movie/day?api_key="+this.key+"&page="+this.page).then((function(e){return e.json()}))},fetchMoviesByKeyword:function(){return fetch(this.path+"/search/movie?api_key="+this.key+"&language=en-US&page="+this.page+"&include_adult=false&query="+this.query).then((function(e){return e.json()}))}},u=(a("lYjL"),a("IvQZ"),a("WB5j"),a("D/wG"),a("Muwe"),a("4NM0"),a("aZFp"),[{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Science Fiction"},{id:10770,name:"TV Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}]);var m=function(e){e.map((function(e){var t=e.id,a=e.poster_path,n=e.title,i=e.release_date,s=e.genre_ids,r=u.filter((function(e){return s.includes(e.id)})).map((function(e){return e.name})),o=[];r.length<3?o=r:(o=r.slice(0,2)).push("Other");var l='\n<li class="films-gallery-item" data-id="'+t+'">\n  <img\n    class="films-gallery-item-image"\n    src="https://image.tmdb.org/t/p/w342'+a+'"\n    alt="«'+n+'» film poster"\n  >\n  <p class="films-gallery-item-title">'+n.toUpperCase()+'</p>\n  <p class="films-gallery-item-info">'+o.join(", ")+" | "+i.split("-")[0]+"</p>\n</li>\n";document.querySelector("#films-gallery").insertAdjacentHTML("beforeend",l)}))},p={filmsGallery:document.querySelector("#films-gallery")};function h(e){e.preventDefault(),b(),p.filmsGallery.removeAttribute("data-feature"),d.resetPage();var t=document.querySelector(".header-search-warning-show");t.classList.add("is-hidden");var a=e.currentTarget,n=a.elements.query;if(""===n.value)return t.classList.remove("is-hidden"),void(t.textContent="Unable to make a search query. Please enter any text!");d.setQuery(n.value),l(),g().then((function(){v(d.filmsAmount)})).catch(console.log).finally(c),y(),a.reset()}function g(){return d.fetchMoviesByKeyword().then((function(e){var t=e.results,a=e.total_results,n=document.querySelector(".header-search-warning-show");if(0===t.length)return n.classList.remove("is-hidden"),void(n.textContent="Your search did not match any films. Please clarify the request!");p.filmsGallery.innerHTML="",m(t),d.setFilmsAmount(a),console.log("apiServise.filmsAmount: ",d.filmsAmount)}))}var f={filmsGallery:document.querySelector("#films-gallery"),paginationContainer:document.querySelector("#pagination")};function v(){var e={totalItems:d.filmsAmount,itemsPerPage:20,visiblePages:5,page:1,centerAlign:!1,firstItemClassName:"tui-first-child",lastItemClassName:"tui-last-child",template:{page:'<a href="#" class="tui-page-btn">{{page}}</a>',currentPage:'<strong class="tui-page-btn tui-is-selected">{{page}}</strong>',moveButton:'<a href="#" class="tui-page-btn tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></a>',disabledMoveButton:'<span class="tui-page-btn tui-is-disabled tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></span>',moreButton:'<a href="#" class="tui-page-btn tui-{{type}}-is-ellip"><span class="tui-ico-ellip">...</span></a>'}};new r.a("pagination",e)}function y(){f.paginationContainer.addEventListener("click",A),console.log("apiServise.page: ",d.page),console.log("Start")}function b(){f.paginationContainer.removeEventListener("click",A),console.log("apiServise.page: ",d.page),console.log("Stop")}function A(e){if("A"===e.target.nodeName){f.filmsGallery.innerHTML="",l();var t=e.target;switch(console.log("refs.filmsGallery.hasAttribute('data-feature'): ",f.filmsGallery.hasAttribute("data-feature")),t.className){case"tui-page-btn":return d.setPage(Number(t.textContent)),void(f.filmsGallery.hasAttribute("data-feature")?B().catch(console.log).finally(c):g().catch(console.log).finally(c));case"tui-page-btn tui-prev":return d.decrementPage(),void(f.filmsGallery.hasAttribute("data-feature")?B().catch(console.log).finally(c):g().catch(console.log).finally(c));case"tui-page-btn tui-next":return d.incrementPage(),void(f.filmsGallery.hasAttribute("data-feature")?B().catch(console.log).finally(c):g().catch(console.log).finally(c));case"tui-page-btn tui-first":return d.resetPage(),void(f.filmsGallery.hasAttribute("data-feature")?B().catch(console.log).finally(c):g().catch(console.log).finally(c));case"tui-page-btn tui-last":return d.setPage(d.filmsAmount/20),void(f.filmsGallery.hasAttribute("data-feature")?B().catch(console.log).finally(c):g().catch(console.log).finally(c));case"tui-page-btn tui-first-child":return d.resetPage(),void(f.filmsGallery.hasAttribute("data-feature")?B().catch(console.log).finally(c):g().catch(console.log).finally(c));case"tui-page-btn tui-prev-is-ellip tui-first-child":var a=document.querySelector(".tui-is-selected");return console.log("activeBtnRef1.textContent: ",a.textContent),d.setPage(Number(a.textContent)),console.log("page: ",d.page),void(f.filmsGallery.hasAttribute("data-feature")?B().catch(console.log).finally(c):g().catch(console.log).finally(c));case"tui-page-btn tui-next-is-ellip tui-last-child":var n=document.querySelector(".tui-is-selected");return console.log("activeBtnRef2.textContent: ",n.textContent),d.setPage(Number(n.textContent)),console.log("page: ",d.page),void(f.filmsGallery.hasAttribute("data-feature")?B().catch(console.log).finally(c):g().catch(console.log).finally(c));default:console.log("Hi!")}}}a("FWxf"),a("lAJ5"),a("Xlt+");var w=a("SzhR");a("DSQa"),a("SHTW"),a("Ri8E");function S(){window.removeEventListener("keydown",L),document.body.classList.remove("show-modal")}function L(e){"Escape"===e.code&&S()}n.openModalBtn.addEventListener("click",(function(){window.addEventListener("keydown",L),n.backdrop.classList.remove("is-hidden"),document.body.classList.add("show-modal")})),n.closeModalBtn.addEventListener("click",S),n.backdrop.addEventListener("click",(function(e){e.currentTarget===e.target&&S()}));w.a.initializeApp({apiKey:"AIzaSyC7TRb9mfyMhzQU-yq3pDKTxl2-zaHwRmo",authDomain:"filmoteka-login.firebaseapp.com",databaseURL:"https://filmoteka-login-default-rtdb.europe-west1.firebasedatabase.app",projectId:"filmoteka-login",storageBucket:"filmoteka-login.appspot.com",messagingSenderId:"658952655924",appId:"1:658952655924:web:26304edc0b944079c1e661"});var k=new firebaseui.auth.AuthUI(w.a.auth());new w.a.auth.PhoneAuthProvider;var H=w.a.database().ref("users"),q="";console.log(q);var D={signInFlow:"popup",signInOptions:[w.a.auth.PhoneAuthProvider.PROVIDER_ID,w.a.auth.GoogleAuthProvider.PROVIDER_ID,w.a.auth.EmailAuthProvider.PROVIDER_ID,firebaseui.auth.AnonymousAuthProvider.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:function(e){if(e)return T(firebaseUser.uid),!0}}};function T(e){var t={userId:e,userWatched:[],userQueue:[]},a={};return a["users/"+e]=t,w.a.database().ref().update(a)}n.logOutbutton.addEventListener("click",(function(e){w.a.auth().signOut(),localStorage.removeItem("currentUserId"),window.location.reload()})),w.a.auth().onAuthStateChanged((function(e){if(e){var t=e.displayName;null===t&&(t="guest"),n.userName.innerHTML=""+t,document.body.classList.remove("show-modal"),n.logOutbutton.classList.remove("is-hidden"),n.openModalBtn.classList.add("is-hidden"),localStorage.setItem("currentUserId",JSON.stringify(e.uid)),q=JSON.parse(localStorage.getItem("currentUserId")),console.log(q),G(q)||T(q)}else n.userName.innerHTML="",n.openModalBtn.classList.remove("is-hidden"),n.logOutbutton.classList.add("is-hidden"),k.start("#firebaseui-auth-container",D)}));var P=a("VYoj"),M=a.n(P);a("v7UC");function G(e){var t={};return H.on("value",(function(a){t=a.val()[""+e],console.log(t)})),t}M.a.options={closeButton:!0,debug:!1,newestOnTop:!0,progressBar:!1,positionClass:"toast-bottom-right",preventDuplicates:!1,onclick:null,showDuration:"200",hideDuration:"400",timeOut:"2000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},H.on("value",(function(e){e.val()}));var I={header:document.querySelector(".header-container-js"),filmsGallery:document.querySelector("#films-gallery"),libraryBtn:document.querySelector(".navigation-list-item-link-my-library"),paginationContainer:document.querySelector("#pagination"),homeLink:document.querySelector(".navigation-list-item-link-home")};function C(e){I.header.innerHTML="",I.header.insertAdjacentHTML("beforeend",e),I.libraryBtn.addEventListener("click",E)}function B(){return d.fetchTrends().then((function(e){var t=e.results,a=e.total_results;I.filmsGallery.innerHTML="",m(t),d.setFilmsAmount(a),console.log("apiServise.filmsAmount: ",d.filmsAmount)}))}function E(e){e.preventDefault(),I.homeLink.classList.remove("current"),I.libraryBtn.classList.add("current");var t=function(e){if(e){var t=[];return H.on("value",(function(a){t=a.val()[""+e].userWatched})),t}}(q),a=function(e){if(e){var t=[];return H.on("value",(function(a){t=a.val()[""+e].userQueue})),t}M.a.error("Please LOG IN to create Your Library")}(q);C(i.myLibraryHeader),document.querySelector(".modal")&&document.querySelector(".modal").remove();var n=document.querySelector(".header-button-watched"),s=document.querySelector(".header-button-queue");function r(e,t,a){e.addEventListener("click",(function(n){n.preventDefault(),o(a),t.classList.remove("is-active-btn"),e.classList.add("is-active-btn")}))}function o(e){I.filmsGallery.innerHTML="",e.map((function(e){var t=e.id,a=e.poster_path,n=e.title,i=e.release_date,s=e.genres,r=e.vote_average,o='\n<li class="films-gallery-item" data-id="'+t+'">\n  <img\n    class="films-gallery-item-image"\n    src="https://image.tmdb.org/t/p/w342'+a+'"\n    alt="«'+n+'» film poster"\n  >\n  <p class="films-gallery-item-title">'+n.toUpperCase()+'</p>\n  <p class="films-gallery-item-info">'+s.join(", ")+" | "+i+'<span class="modal-info-vote-average library">'+r+"</span></p>\n</li>\n";I.filmsGallery.insertAdjacentHTML("beforeend",o)}))}I.filmsGallery.innerHTML="",I.paginationContainer.style.display="none",o(t),r(s,n,a),r(n,s,t)}a("PzF0");var U=a("dcBu"),O=a("LlGi"),R='<div class="team-wrapper">\n<div class="team-card">\n <img\n    class="team-image"\n    src="https://ca.slack-edge.com/T01301DGATC-U013V8Q7HU1-b66c40babb7d-192"\n  >\n    <p class="team-name">Rostyslav Zahorulko</p>\n    <p class="team-role">Team Lead</p>\n    \n</div>\n<div class="team-card">\n     <img\n    class="team-image"\n    src="https://ca.slack-edge.com/T01AD58HHH7-U01A5LX36UT-d79e95c64409-5122"\n  >\n    <p class="team-name">Arkadii Basovych</p>\n    <p class="team-role">Scrum Master</p>\n    \n</div>\n<div class="team-card">\n    <img\n    class="team-image"\n    src="https://ca.slack-edge.com/T01AD58HHH7-U01A9LTBZA8-06cbe1fcd7b6-512"\n  >\n    <p class="team-name">Oksana Cherepanova</p>\n    <p class="team-role">Developer</p>\n    \n</div>\n<div class="team-card">\n    <img\n    class="team-image"\n    src="https://ca.slack-edge.com/T01AD58HHH7-U019WN8GZJS-380c6cd06280-512"\n  >\n    <p class="team-name">Natalia Duvirak</p>\n    <p class="team-role">Developer</p>\n    \n</div>\n<div class="team-card">\n    <img\n    class="team-image"\n    src="https://ca.slack-edge.com/T01AD58HHH7-U01AT710YLQ-3a6d16128ec7-512"\n  >\n    <p class="team-name">David<br>Shakaya</p>\n    <p class="team-role">Developer</p>\n    \n</div>\n<div class="team-card">\n    <img\n    class="team-image"\n    src="https://ca.slack-edge.com/T01AD58HHH7-U01A3HTTQE6-4c9caf01316f-512"\n  >\n    <p class="team-name">Oleksii Maistriuk</p>\n    <p class="team-role">Developer</p>\n    \n</div>\n<div class="team-card">\n   <img\n    class="team-image"\n    src="https://ca.slack-edge.com/T01AD58HHH7-U01ATCQ5GKA-46dd5abf2215-512"\n  >\n    <p class="team-name">Zoe<br>Baletska</p>\n    <p class="team-role">Developer</p>\n    \n</div>\n<div class="team-card">\n    <img\n    class="team-image"\n    src="https://ca.slack-edge.com/T01AD58HHH7-U019WKPR89L-21c1789a67bc-512"\n  >\n    <p class="team-name">Serhii<br>Koziuba</p>\n    <p class="team-role">Developer</p>\n    \n</div>\n<div class="team-card">\n    <img\n    class="team-image"\n    src="https://ca.slack-edge.com/T01AD58HHH7-U019WP9NVN2-6122ddfef0b5-512"\n  >\n    <p class="team-name">Konstantin Bruno</p>\n    <p class="team-role">Developer</p>\n    \n</div>\n<div class="team-card">\n    <img\n    class="team-image"\n    src="'+a.n(O).a+'"\n  >\n    <p class="team-name">Iryna<br>Redka</p>\n    <p class="team-role">Developer</p>\n    \n</div>\n<div class="team-card">\n   <img\n    class="team-image"\n    src="https://ca.slack-edge.com/T01AD58HHH7-U019P8QMTUP-6513aed3ebc7-512"\n  >\n    <p class="team-name">Larysa Smyrnova</p>\n    <p class="team-role">Developer</p>\n</div>\n</div>';document.querySelector(".open-modal-develop").addEventListener("click",(function(e){N.show(),window.addEventListener("keydown",(function e(t){"Escape"===t.code&&(N.close(),window.removeEventListener("keydown",e))}))}));var j,N=U.create(R);j=i.homeHeader,b(),I.filmsGallery.setAttribute("data-feature","trends"),console.log(I.filmsGallery),d.resetPage(),l(),C(j),B().then((function(){v()})).catch(console.log).finally(c),y(),document.querySelector("#search-form").addEventListener("submit",h)}},[["QfWi",1,2]]]);
//# sourceMappingURL=main.97773d52702b53a4b6a9.js.map